<div class="main">
  <div class="filter">
    <p>Currently there are <%= Mushroom.count %> mushrooms in the database!</p>
    <h2>What kind of mushrooms are you looking for?</h2>

    <%= form_tag root_path, method: :get do %>

    <% @mushroom_attributes.each do |mushroom_attribute| %>

    <%= label_tag(mushroom_attribute) %>
    <%= select_tag "#{mushroom_attribute}", options_for_select([""] + Mushroom::MUSHROOM_CONSTANTS[mushroom_attribute.to_sym]) %>
    <% end %>
    <br>
    <%= submit_tag "Search" , class: "btn btn-primary" %>
    <%= link_to "Remove filter", root_path, class: "btn btn-warning"  %>

    <% end %>
  </div>

  <div class="results">
    <% if @mushrooms.count > 0 %>
      <p>Your search returned <b><%= @mushrooms.count %></b> results / 20 results per page</p>
      <table class="table table-striped table-bordered table-sm">
        <thead class="thead-dark">
          <tr>
            <th>#</th>
            <% @mushroom_attributes.each do |mushroom_attribute| %>
            <th><%= mushroom_attribute.gsub('_', ' ').capitalize %></th>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <% @mushrooms.each do |mushroom| %>
          <tr>
            <td><%= mushroom.id %></td>
            <% @mushroom_attributes.each do |mushroom_attribute| %>
            <td><%= mushroom[mushroom_attribute] %></td>
            <% end %>
          </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p>No mushrooms match your search criterias</p>
    <% end %>

    <div class="digg_pagination">
      <div class="page_info">
        <%= page_entries_info @mushrooms %>
      </div>
      <div class="pagination_container">
      <%= will_paginate @mushrooms, previous_label: "<", next_label: ">" %>
      </div>
    </div>
  </div>
</div>
